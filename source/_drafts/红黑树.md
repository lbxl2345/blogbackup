### 红黑树
红黑树是一种二叉查找树，但是它的每一个结点，都添加了一个存储位，为Red或Black。通过对从根到叶子的着色方式进行限制，它能够确保没有一条路径会比其他路径长两倍以上，因此是最接近平衡的。  
这棵树具有什么性质呢？它能够保证在最坏的情况下，查找、插入、删除等操作的时间复杂度为O(lgn)。红黑树中，结点具有以下特性：  

1. 结点是红的或黑的  
2. 根结点是黑的  
3. 叶结点（空结点）是黑的  
4. 如果父结点是红的，那么其两个儿子都是黑的  
5. 对每个结点，从它到其NULL的所有路径上，包含相同数目的黑结点  

### 树的平衡、旋转
树的平衡，是指对于一颗树的左右子树，它们的高度相差不超过一个范围。例如AVL树的左右子树高度不会超过1。这里旋转分为四种，分别是LL，RR，LR，RL四种。假设发生不平衡的最深结点为X，那么：  
LL:插入点在X的左子节点的左子树  
RR:插入点在X的右子节点的右子树  
LR:插入点在X的左子节点的右子树  
RL:插入点在X的右子节点的左子树 
而旋转就是用来解决不平衡的问题的。这里，单旋转用来解决外侧插入(LL，RR)带来的不平衡，而双旋转用来解决内侧插入(LR，RL)带来的不平衡。双旋转相当于两次单旋转。

对于红黑树来说，由于其特性，其新增节点必须为红，新增节点的父结点必须为黑。如果一次插入导致上述条件没有满足，那么就必须调整颜色、修改树形。

### 插入节点
对于红黑树来说，假设插入了一个新的节点X，它的父节点为P，祖父节点为G，伯父节点为S，曾祖父节点为GG。具体情况由GG和S以及X来决定。  
情况1:如果S为黑色且X为外侧插入。此时要对PG进行一次旋转，并改变二者的颜色。  
情况2:如果S为黑色且X为内侧插入。此时必须对P，X做一次单旋转，并改变而这的颜色，再对G和结果做一次单旋转。  
情况3:如果S为红且X为外侧插入。此时先对P和G做一次单旋转，并改变X的颜色。如果GG为黑色，则解决。
情况4:如果S为红且X为外侧插入。此时先对P和G做一次单旋转，并改变X的颜色。如果GG为红色，则要继续向上旋转，直到不再有父子为连续红色。

插入节点必须是红色的，那么如果父节点是黑色，那么能维持性质；如果父节点是红色，则需要进行调整。那么插入算法就通过重新着色/旋转来维持性质。这个修正的过程可以用自顶向下的方式来实现。设新增节点为A，那么就顺着A的路径，只要看到有某个节点X的两个子节点都是红色，那么就把X改为红色，并把两个子节点改为黑色。但如果X的父节点也是红色，那么就要进行旋转。这样能够避免情况4下，不断向上旋转的情况发生。